__d(function(g,r,i,a,m,_e,d){"use strict";Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"events",{enumerable:!0,get:function(){return s}}),_e.initPlatformRPC=async function(){if(t)return void console.log('[Platform RPC] Already initialized');if('undefined'==typeof window)throw new Error('Platform RPC can only be initialized in browser context');const o=window.PearWorkerClient;if(!o)throw new Error('PearWorkerClient not available - ensure worker-client.js is loaded');console.log('[Platform RPC] Initializing via PearWorkerClient...'),l();try{await o.initialize(),e=o.blobServerPort,t=!0,console.log('[Platform RPC] Initialized, blobServerPort:',e),n.ready.forEach(t=>t({blobServerPort:e}))}catch(e){throw console.error('[Platform RPC] Failed to initialize:',e),e}},_e.terminatePlatformRPC=function(){const n=window?.PearWorkerClient;n&&n.close&&(console.log('[Platform RPC] Closing worker client'),n.close());t=!1,e=null},_e.isInitialized=function(){return t},_e.getBlobServerPort=function(){return e},_e.getHRPCInstance=y,Object.defineProperty(_e,"rpc",{enumerable:!0,get:function(){return f}});let e=null,t=!1;const n={ready:[],error:[],videoStats:[],uploadProgress:[],feedUpdate:[]};function o(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}const s={onReady:e=>(n.ready.push(e),()=>o(n.ready,e)),onError:e=>(n.error.push(e),()=>o(n.error,e)),onVideoStats:e=>(n.videoStats.push(e),()=>o(n.videoStats,e)),onUploadProgress:e=>(n.uploadProgress.push(e),()=>o(n.uploadProgress,e)),onFeedUpdate:e=>(n.feedUpdate.push(e),()=>o(n.feedUpdate,e))};let c=!1;function l(){c||'undefined'==typeof window||(c=!0,window.addEventListener('pearVideoStats',e=>{n.videoStats.forEach(t=>t(e.detail))}),window.addEventListener('pearUploadProgress',e=>{n.uploadProgress.forEach(t=>t(e.detail))}),window.addEventListener('pearFeedUpdate',e=>{n.feedUpdate.forEach(t=>t(e.detail))}))}function y(){return window?.PearWorkerClient?.getRpc?.()||window?.PearWorkerClient?.rpc}function u(){const e=y();if(!e)throw new Error('Platform RPC not initialized');return e}const f={async createIdentity(e){const t='string'==typeof e?{name:e}:e;return u().createIdentity(t)},getIdentity:async()=>u().getIdentity({}),getIdentities:async()=>u().getIdentities({}),async setActiveIdentity(e){const t='string'==typeof e?{publicKey:e}:e;return u().setActiveIdentity(t)},async recoverIdentity(e,t){const n='string'==typeof e?{seedPhrase:e,name:t}:e;return u().recoverIdentity(n)},async listVideos(e){const t='string'==typeof e?{channelKey:e}:e;return u().listVideos(t)},async getVideoUrl(e,t){const n='string'==typeof e?{channelKey:e,videoId:t}:e;return u().getVideoUrl(n)},async prefetchVideo(e,t){const n='string'==typeof e?{channelKey:e,videoId:t}:e;return u().prefetchVideo(n)},async getVideoStats(e,t){const n='string'==typeof e?{channelKey:e,videoId:t}:e;return u().getVideoStats(n)},async uploadVideo(e,t,n){const o='string'==typeof e?{title:e,description:t,filePath:n}:e;return u().uploadVideo(o)},async setVideoThumbnail(e,t,n){const o='string'==typeof e?{videoId:e,imageData:t,mimeType:n}:e;return u().setVideoThumbnail(o)},async getVideoThumbnail(e,t){const n='string'==typeof e?{channelKey:e,videoId:t}:e;return u().getVideoThumbnail(n)},async getChannel(e){const t='string'==typeof e?{publicKey:e}:e;return u().getChannel(t)},async subscribeChannel(e){const t='string'==typeof e?{channelKey:e}:e;return u().subscribeChannel(t)},async joinChannel(e){const t='string'==typeof e?{channelKey:e}:e;return u().joinChannel(t)},async unsubscribeChannel(e){const t='string'==typeof e?{channelKey:e}:e;return u().unsubscribeChannel(t)},getSubscriptions:async()=>u().getSubscriptions({}),getPublicFeed:async()=>u().getPublicFeed({}),refreshFeed:async()=>u().refreshFeed({}),submitToFeed:async()=>u().submitToFeed({}),async hideChannel(e){const t='string'==typeof e?{channelKey:e}:e;return u().hideChannel(t)},async getChannelMeta(e){const t='string'==typeof e?{channelKey:e}:e;return u().getChannelMeta(t)},getStatus:async()=>u().getStatus({}),getSwarmStatus:async()=>u().getSwarmStatus({}),getBlobServerPort:async()=>u().getBlobServerPort({}),pickVideoFile:async()=>u().pickVideoFile({}),pickImageFile:async()=>u().pickImageFile({})}},5229,[]);